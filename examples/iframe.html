<html>

<head>
	<style>
		.container {
			margin-top: 50px;
			margin: auto;
			width: 400px;
			height: 600px;
		}

		.content {
			width: 400px;
			height: 600px;
			border: none;
		}

		body {
			background-color: gray;
		}
	</style>

	<script>
		window.addEventListener("message", receiveMessage, false);

		function receiveMessage(event) {
			document.querySelector('.content').remove();
			setTimeout(() => { alert(event.data); }, 1000);
		}

		function makeAvatar() {
			let iframe = document.getElementById('iframe')

			if (iframe) {
				iframe.id = "iframe"
				iframe.src = 'https://vr.readyplayer.me/';
				iframe.className = 'content';
				iframe.allow = "camera *; microphone *";
			}
			else {
				iframe = document.createElement('iframe');
				iframe.id = "iframe"
				iframe.src = 'https://vr.readyplayer.me/';
				iframe.className = 'content';
				iframe.allow = "camera *; microphone *";
				document.querySelector('.container').appendChild(iframe);
			}
		}
	</script>
</head>

<body>
	<input type="button" value="Start" onClick="makeAvatar()" />
	<div class="container"></div>
</body>

</html>
